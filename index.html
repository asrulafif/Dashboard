<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 300;
            color: #fff;
            margin-bottom: 10px;
        }

        .header .date-time {
            font-size: 1.2em;
            color: #888;
            margin-bottom: 15px;
        }

        .header .quote {
            font-style: italic;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.5em;
            color: #fff;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            font-weight: 300;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #fff;
            font-weight: 400;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        .weather-display {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .weather-icon {
            font-size: 3em;
        }

        .weather-info {
            flex: 1;
        }

        .temperature {
            font-size: 2.5em;
            font-weight: 300;
            color: #fff;
        }

        .weather-details {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #aaa;
        }

        .music-recommendation {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .music-icon {
            font-size: 2.5em;
        }

        .music-info {
            flex: 1;
        }

        .music-title {
            font-size: 1.1em;
            color: #fff;
            margin-bottom: 5px;
        }

        .music-subtitle {
            font-size: 0.9em;
            color: #888;
        }

        .quran-verse {
            background: rgba(139, 195, 74, 0.1);
            border-left: 4px solid #8BC34A;
            padding: 20px;
            border-radius: 8px;
        }

        .verse-text {
            font-size: 1.1em;
            font-style: italic;
            color: #e0e0e0;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .verse-reference {
            font-size: 0.9em;
            color: #8BC34A;
            font-weight: bold;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .stat {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 0.85em;
            color: #888;
            margin-top: 5px;
        }

        .mood-selector {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .mood-btn {
            font-size: 2em;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .mood-btn:hover {
            transform: scale(1.2);
            background: rgba(255, 255, 255, 0.1);
        }

        .mood-btn.selected {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.3);
        }

        .water-tracker {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
        }

        .water-cups {
            display: flex;
            gap: 8px;
        }

        .water-cup {
            width: 30px;
            height: 40px;
            border: 2px solid rgba(33, 150, 243, 0.5);
            border-radius: 0 0 8px 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .water-cup.filled {
            background: linear-gradient(to top, #2196F3, #64B5F6);
            border-color: #2196F3;
        }

        .water-cup:hover {
            transform: translateY(-2px);
        }

        .habit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .habit {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .habit:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .habit:hover .habit-delete {
            opacity: 1;
        }

        .habit.active {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .habit-delete {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(244, 67, 54, 0.3);
            border: none;
            color: #f44336;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.8em;
            opacity: 0;
            transition: all 0.2s;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .habit-delete:hover {
            background: rgba(244, 67, 54, 0.5);
        }

        .habit-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .habit-name {
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .streak {
            font-size: 1.2em;
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .habit-controls {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 8px;
        }

        .habit-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 5px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }

        .habit-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 10px;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }

        .goal-item {
            margin-bottom: 20px;
            position: relative;
        }

        .goal-item:hover .goal-delete {
            opacity: 1;
        }

        .goal-delete {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #f44336;
            padding: 4px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            opacity: 0;
            transition: all 0.2s;
        }

        .goal-delete:hover {
            background: rgba(244, 67, 54, 0.3);
        }

        .goal-name {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .todo-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            transition: background 0.2s;
            gap: 10px;
        }

        .todo-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .todo-item.completed {
            opacity: 0.5;
            text-decoration: line-through;
        }

        .todo-item span {
            flex: 1;
            cursor: text;
        }

        .delete-btn {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #f44336;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            opacity: 0;
            transition: all 0.2s;
        }

        .todo-item:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: rgba(244, 67, 54, 0.3);
        }

        .add-todo-btn {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.3);
            color: #4CAF50;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 1em;
            transition: all 0.2s;
            margin-top: 10px;
        }

        .add-todo-btn:hover {
            background: rgba(76, 175, 80, 0.3);
        }

        button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s;
        }

        button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        button.primary {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }

        button.primary:hover {
            background: rgba(76, 175, 80, 0.4);
        }

        .timer-display {
            font-size: 3em;
            font-weight: 300;
            margin: 20px 0;
            color: #fff;
            font-variant-numeric: tabular-nums;
            text-align: center;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-family: inherit;
            font-size: 0.95em;
            resize: vertical;
            min-height: 150px;
        }

        textarea:focus {
            outline: none;
            border-color: rgba(76, 175, 80, 0.5);
        }

        input[type="number"] {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px;
            color: #fff;
            font-size: 1em;
            width: 80px;
            text-align: center;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: rgba(76, 175, 80, 0.5);
        }

        input[type="range"] {
            width: 100%;
            margin-top: 5px;
        }

        .news-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid rgba(76, 175, 80, 0.5);
            transition: all 0.2s;
            cursor: pointer;
        }

        .news-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .news-title {
            font-size: 0.95em;
            margin-bottom: 5px;
            color: #fff;
        }

        .news-source {
            font-size: 0.8em;
            color: #888;
        }

        .loading {
            text-align: center;
            color: #888;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .grid, .grid-2 {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .timer-display {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Your Dashboard</h1>
            <div class="date-time" id="dateTime"></div>
            <div class="quote" id="quote"></div>
        </div>

        <!-- SECTION 1: AT A GLANCE -->
        <div class="section-title">üìä At a Glance</div>
        <div class="grid">
            <!-- Weather & Music -->
            <div class="card">
                <h2>üå§Ô∏è Weather & Music</h2>
                <div id="weatherContent" class="loading">Loading weather...</div>
                <div class="music-recommendation">
                    <div class="music-icon">üéµ</div>
                    <div class="music-info">
                        <div class="music-title" id="musicTitle">Today's Recommended Playlist</div>
                        <div class="music-subtitle" id="musicSubtitle">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Daily Quran Verse -->
            <div class="card">
                <h2>üìø Daily Inspiration</h2>
                <div class="quran-verse">
                    <div class="verse-text" id="verseText">Loading verse...</div>
                    <div class="verse-reference" id="verseReference"></div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="card">
                <h2>üìà Today's Overview</h2>
                <div class="stat-grid">
                    <div class="stat">
                        <div class="stat-value" id="pomodoroCount">0</div>
                        <div class="stat-label">Focus Sessions</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="tasksCompleted">0</div>
                        <div class="stat-label">Tasks Done</div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <strong>Mood Check-in</strong>
                    <div class="mood-selector">
                        <button class="mood-btn" data-mood="great">üòÑ</button>
                        <button class="mood-btn" data-mood="good">üôÇ</button>
                        <button class="mood-btn" data-mood="okay">üòê</button>
                        <button class="mood-btn" data-mood="bad">üòï</button>
                        <button class="mood-btn" data-mood="terrible">üò¢</button>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <strong>Water Intake</strong>
                    <div class="water-tracker">
                        <div class="water-cups" id="waterCups"></div>
                        <span id="waterCount">0/8</span>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <strong>Sleep Hours</strong>
                    <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <input type="number" id="sleepHours" min="0" max="24" value="7" step="0.5">
                        <span>hours</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: TO-DO LISTS -->
        <div class="section-title">üìù To-Do Lists</div>
        <div class="grid-2">
            <!-- Academic To-Do -->
            <div class="card">
                <h2>üéì Academic To-Do</h2>
                <div id="academicTodos"></div>
                <button class="add-todo-btn" id="addAcademicBtn">+ Add Task</button>
            </div>

            <!-- Personal To-Do -->
            <div class="card">
                <h2>üè† Personal To-Do</h2>
                <div id="personalTodos"></div>
                <button class="add-todo-btn" id="addPersonalBtn">+ Add Task</button>
            </div>
        </div>

        <!-- SECTION 3: DAILY HABITS & GOALS -->
        <div class="section-title">‚úÖ Daily Habits & Goals</div>
        <div class="grid">
            <!-- Habits -->
            <div class="card">
                <h2>üéØ Daily Habits</h2>
                <div class="habit-grid" id="habits"></div>
                <button class="add-todo-btn" id="addHabitBtn">+ Add Habit</button>
            </div>

            <!-- Goals Progress -->
            <div class="card">
                <h2>üéØ Goals Progress</h2>
                <div id="goalsContainer"></div>
                <button class="add-todo-btn" id="addGoalBtn">+ Add Goal</button>
            </div>

            <!-- Pomodoro Timer -->
            <div class="card">
                <h2>‚è±Ô∏è Focus Timer</h2>
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div class="timer-controls">
                    <button class="primary" id="startBtn">Start</button>
                    <button id="pauseBtn">Pause</button>
                    <button id="resetBtn">Reset</button>
                </div>
            </div>
        </div>

        <!-- SECTION 4: NOTES & NEWS -->
        <div class="section-title">üì∞ Notes & News</div>
        <div class="grid-2">
            <!-- Quick Notes -->
            <div class="card">
                <h2>üìù Quick Notes</h2>
                <textarea id="notes" placeholder="Jot down your thoughts..."></textarea>
            </div>

            <!-- News -->
            <div class="card">
                <h2>üì∞ Top News</h2>
                <div id="newsContent" class="loading">Loading news...</div>
            </div>
        </div>
    </div>

    <script>
        // API Keys
        const WEATHER_API_KEY = '0d3a3a130bca1ce4c200e1d8d5f6a55c';
        const NEWS_API_KEY = 'pub_6e4a77ce98d943fda517ace7a45f3576';

        // Quran verses database
        const quranVerses = [
            { text: "And He found you lost and guided you.", reference: "Surah Ad-Duha 93:7" },
            { text: "So verily, with the hardship, there is relief. Verily, with the hardship, there is relief.", reference: "Surah Ash-Sharh 94:5-6" },
            { text: "And whoever puts all his trust in Allah, then He will suffice him.", reference: "Surah At-Talaq 65:3" },
            { text: "Indeed, Allah is with those who are patient.", reference: "Surah Al-Baqarah 2:153" },
            { text: "And never give up hope of Allah's Mercy.", reference: "Surah Yusuf 12:87" },
            { text: "Allah does not burden a soul beyond that it can bear.", reference: "Surah Al-Baqarah 2:286" },
            { text: "And He is with you wherever you are.", reference: "Surah Al-Hadid 57:4" },
            { text: "Remember Me, and I will remember you.", reference: "Surah Al-Baqarah 2:152" }
        ];

        // Music recommendations
        const musicRecommendations = [
            { title: "Peaceful Morning", subtitle: "Ambient & Relaxing Sounds" },
            { title: "Focus Flow", subtitle: "Lo-fi Beats for Productivity" },
            { title: "Spiritual Reflections", subtitle: "Nasheed & Islamic Music" },
            { title: "Nature's Calm", subtitle: "Soothing Nature Sounds" },
            { title: "Deep Work Mode", subtitle: "Instrumental Focus Music" },
            { title: "Evening Serenity", subtitle: "Calm & Peaceful Melodies" },
            { title: "Study Sessions", subtitle: "Classical Piano & Strings" }
        ];

        // Motivational quotes
        const quotes = [
            "The secret of getting ahead is getting started.",
            "Focus on being productive instead of busy.",
            "Your limitation‚Äîit's only your imagination.",
            "Great things never come from comfort zones.",
            "Success doesn't just find you. You have to go out and get it.",
            "Don't watch the clock; do what it does. Keep going."
        ];

        // LocalStorage functions
        function saveToStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        function loadFromStorage(key, defaultValue = null) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        }

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            const dateStr = now.toLocaleDateString('en-US', options);
            document.getElementById('dateTime').textContent = `${dateStr} ‚Ä¢ ${timeStr}`;
        }

        // Set random quote
        document.getElementById('quote').textContent = quotes[Math.floor(Math.random() * quotes.length)];

        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Daily verse and music (changes daily)
        function loadDailyInspiration() {
            const today = new Date().toDateString();
            const savedDate = localStorage.getItem('inspirationDate');
            
            if (savedDate !== today) {
                const verseIndex = Math.floor(Math.random() * quranVerses.length);
                const musicIndex = Math.floor(Math.random() * musicRecommendations.length);
                
                localStorage.setItem('inspirationDate', today);
                localStorage.setItem('dailyVerse', JSON.stringify(quranVerses[verseIndex]));
                localStorage.setItem('dailyMusic', JSON.stringify(musicRecommendations[musicIndex]));
            }
            
            const verse = JSON.parse(localStorage.getItem('dailyVerse'));
            const music = JSON.parse(localStorage.getItem('dailyMusic'));
            
            document.getElementById('verseText').textContent = `"${verse.text}"`;
            document.getElementById('verseReference').textContent = verse.reference;
            document.getElementById('musicTitle').textContent = music.title;
            document.getElementById('musicSubtitle').textContent = music.subtitle;
        }

        loadDailyInspiration();

        // Fetch Weather
        async function fetchWeather() {
            try {
                const city = 'Manchester';
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${WEATHER_API_KEY}`
                );
                const data = await response.json();
                
                const weatherEmoji = {
                    'Clear': '‚òÄÔ∏è',
                    'Clouds': '‚òÅÔ∏è',
                    'Rain': 'üåßÔ∏è',
                    'Drizzle': 'üå¶Ô∏è',
                    'Thunderstorm': '‚õàÔ∏è',
                    'Snow': '‚ùÑÔ∏è',
                    'Mist': 'üå´Ô∏è',
                    'Fog': 'üå´Ô∏è'
                };

                const emoji = weatherEmoji[data.weather[0].main] || 'üå§Ô∏è';
                
                document.getElementById('weatherContent').innerHTML = `
                    <div class="weather-display">
                        <div class="weather-icon">${emoji}</div>
                        <div class="weather-info">
                            <div class="temperature">${Math.round(data.main.temp)}¬∞C</div>
                            <div style="font-size: 1.1em; color: #ccc; margin-bottom: 5px;">${data.weather[0].description}</div>
                            <div class="weather-details">
                                <span>üíß ${data.main.humidity}%</span>
                                <span>üí® ${Math.round(data.wind.speed)} m/s</span>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Weather fetch error:', error);
                document.getElementById('weatherContent').innerHTML = '<p style="color: #f44336;">Unable to load weather</p>';
            }
        }

        // Fetch News
        async function fetchNews() {
            try {
                const response = await fetch(
                    `https://newsdata.io/api/1/news?apikey=${NEWS_API_KEY}&country=gb&language=en&size=5`
                );
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    const newsHTML = data.results.map(article => `
                        <div class="news-item" onclick="window.open('${article.link}', '_blank')">
                            <div class="news-title">${article.title}</div>
                            <div class="news-source">${article.source_id || 'News'}</div>
                        </div>
                    `).join('');
                    
                    document.getElementById('newsContent').innerHTML = newsHTML;
                } else {
                    document.getElementById('newsContent').innerHTML = '<p style="color: #888;">No news available</p>';
                }
            } catch (error) {
                console.error('News fetch error:', error);
                document.getElementById('newsContent').innerHTML = '<p style="color: #f44336;">Unable to load news</p>';
            }
        }

        fetchWeather();
        fetchNews();
        setInterval(fetchWeather, 600000);
        setInterval(fetchNews, 1800000);

        // To-Do List Management
        let academicTodos = loadFromStorage('academicTodos', []);
        let personalTodos = loadFromStorage('personalTodos', []);

        function renderTodos(type) {
            const todos = type === 'academic' ? academicTodos : personalTodos;
            const container = document.getElementById(type + 'Todos');
            
            container.innerHTML = todos.map((todo, index) => `
                <div class="todo-item ${todo.completed ? 'completed' : ''}" data-index="${index}">
                    <input type="checkbox" ${todo.completed ? 'checked' : ''} data-toggle-todo="${type}" data-todo-index="${index}">
                    <span contenteditable="true" data-todo-text="${type}" data-todo-index="${index}">${todo.text}</span>
                    <button class="delete-btn" data-delete-todo="${type}" data-todo-index="${index}">Delete</button>
                </div>
            `).join('');
            
            // Add event listeners
            container.querySelectorAll('[data-toggle-todo]').forEach(cb => {
                cb.addEventListener('change', (e) => {
                    const todoType = e.target.dataset.toggleTodo;
                    const index = parseInt(e.target.dataset.todoIndex);
                    toggleTodo(todoType, index);
                });
            });
            
            container.querySelectorAll('[data-todo-text]').forEach(span => {
                span.addEventListener('blur', (e) => {
                    const todoType = e.target.dataset.todoText;
                    const index = parseInt(e.target.dataset.todoIndex);
                    updateTodoText(todoType, index, e.target.textContent);
                });
            });
            
            container.querySelectorAll('[data-delete-todo]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const todoType = e.target.dataset.deleteTodo;
                    const index = parseInt(e.target.dataset.todoIndex);
                    deleteTodo(todoType, index);
                });
            });
        }

        function addTodo(type) {
            const todos = type === 'academic' ? academicTodos : personalTodos;
            todos.push({ text: 'New task...', completed: false });
            
            if (type === 'academic') {
                academicTodos = todos;
                saveToStorage('academicTodos', academicTodos);
            } else {
                personalTodos = todos;
                saveToStorage('personalTodos', personalTodos);
            }
            
            renderTodos(type);
        }

        function toggleTodo(type, index) {
            const todos = type === 'academic' ? academicTodos : personalTodos;
            todos[index].completed = !todos[index].completed;
            
            if (type === 'academic') {
                saveToStorage('academicTodos', academicTodos);
            } else {
                saveToStorage('personalTodos', personalTodos);
            }
            
            updateTasksCompleted();
            renderTodos(type);
        }

        function updateTodoText(type, index, text) {
            const todos = type === 'academic' ? academicTodos : personalTodos;
            todos[index].text = text;
            
            if (type === 'academic') {
                saveToStorage('academicTodos', academicTodos);
            } else {
                saveToStorage('personalTodos', personalTodos);
            }
        }

        function deleteTodo(type, index) {
            const todos = type === 'academic' ? academicTodos : personalTodos;
            todos.splice(index, 1);
            
            if (type === 'academic') {
                academicTodos = todos;
                saveToStorage('academicTodos', academicTodos);
            } else {
                personalTodos = todos;
                saveToStorage('personalTodos', personalTodos);
            }
            
            updateTasksCompleted();
            renderTodos(type);
        }

        function updateTasksCompleted() {
            const completed = [...academicTodos, ...personalTodos].filter(t => t.completed).length;
            document.getElementById('tasksCompleted').textContent = completed;
        }

        renderTodos('academic');
        renderTodos('personal');
        updateTasksCompleted();
        
        // Add button event listeners
        document.getElementById('addAcademicBtn').addEventListener('click', () => addTodo('academic'));
        document.getElementById('addPersonalBtn').addEventListener('click', () => addTodo('personal'));
        document.getElementById('addHabitBtn').addEventListener('click', addHabit);
        document.getElementById('addGoalBtn').addEventListener('click', addGoal);

        // Pomodoro Timer
        let timerInterval;
        let timeLeft = 25 * 60;
        let isRunning = false;
        let pomodoroCount = loadFromStorage('pomodoroCount', 0);
        document.getElementById('pomodoroCount').textContent = pomodoroCount;

        function updateTimerDisplay() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        document.getElementById('startBtn').addEventListener('click', () => {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(timerInterval);
                        isRunning = false;
                        pomodoroCount++;
                        document.getElementById('pomodoroCount').textContent = pomodoroCount;
                        saveToStorage('pomodoroCount', pomodoroCount);
                        alert('Pomodoro complete! Take a break.');
                        timeLeft = 25 * 60;
                        updateTimerDisplay();
                    }
                }, 1000);
            }
        });

        document.getElementById('pauseBtn').addEventListener('click', () => {
            clearInterval(timerInterval);
            isRunning = false;
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            clearInterval(timerInterval);
            isRunning = false;
            timeLeft = 25 * 60;
            updateTimerDisplay();
        });

        // Mood Tracker
        const savedMood = loadFromStorage('todayMood');
        if (savedMood) {
            document.querySelector(`[data-mood="${savedMood}"]`).classList.add('selected');
        }

        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                saveToStorage('todayMood', btn.dataset.mood);
            });
        });

        // Water Tracker
        const waterCupsDiv = document.getElementById('waterCups');
        const savedWater = loadFromStorage('waterCups', []);

        for (let i = 0; i < 8; i++) {
            const cup = document.createElement('div');
            cup.className = 'water-cup';
            if (savedWater[i]) cup.classList.add('filled');
            
            cup.addEventListener('click', () => {
                cup.classList.toggle('filled');
                savedWater[i] = cup.classList.contains('filled');
                saveToStorage('waterCups', savedWater);
                const filled = document.querySelectorAll('.water-cup.filled').length;
                document.getElementById('waterCount').textContent = `${filled}/8`;
            });
            waterCupsDiv.appendChild(cup);
        }

        const filled = document.querySelectorAll('.water-cup.filled').length;
        document.getElementById('waterCount').textContent = `${filled}/8`;

        // Sleep Hours
        const sleepInput = document.getElementById('sleepHours');
        sleepInput.value = loadFromStorage('sleepHours', 7);
        sleepInput.addEventListener('change', () => {
            saveToStorage('sleepHours', sleepInput.value);
        });

        // Habits Management
        let habits = loadFromStorage('habits', [
            { id: 'exercise', name: 'Exercise', icon: 'üèÉ', count: 0 },
            { id: 'read', name: 'Read', icon: 'üìö', count: 0 },
            { id: 'meditate', name: 'Meditate', icon: 'üßò', count: 0 },
            { id: 'code', name: 'Code', icon: 'üíª', count: 0 }
        ]);

        function renderHabits() {
            const container = document.getElementById('habits');
            container.innerHTML = habits.map((habit, index) => `
                <div class="habit ${habit.count > 0 ? 'active' : ''}" data-habit-index="${index}">
                    <button class="habit-delete" data-delete-habit="${index}">√ó</button>
                    <div class="habit-icon" contenteditable="true" data-habit-icon="${index}">${habit.icon}</div>
                    <div class="habit-name" contenteditable="true" data-habit-name="${index}">${habit.name}</div>
                    <div class="streak" data-count="${habit.count}">${habit.count} üî•</div>
                    <div class="habit-controls">
                        <button class="habit-btn minus" data-adjust-habit="${index}" data-change="-1">‚àí</button>
                        <button class="habit-btn plus" data-adjust-habit="${index}" data-change="1">+</button>
                    </div>
                </div>
            `).join('');
            
            // Add event listeners after rendering
            container.querySelectorAll('[data-delete-habit]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.deleteHabit);
                    deleteHabit(index);
                });
            });
            
            container.querySelectorAll('[data-habit-icon]').forEach(el => {
                el.addEventListener('blur', (e) => {
                    const index = parseInt(e.target.dataset.habitIcon);
                    updateHabitIcon(index, e.target.textContent);
                });
            });
            
            container.querySelectorAll('[data-habit-name]').forEach(el => {
                el.addEventListener('blur', (e) => {
                    const index = parseInt(e.target.dataset.habitName);
                    updateHabitName(index, e.target.textContent);
                });
            });
            
            container.querySelectorAll('[data-adjust-habit]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.adjustHabit);
                    const change = parseInt(e.target.dataset.change);
                    adjustHabit(index, change);
                });
            });
        }

        function addHabit() {
            habits.push({ id: Date.now().toString(), name: 'New Habit', icon: '‚≠ê', count: 0 });
            saveToStorage('habits', habits);
            renderHabits();
        }

        function adjustHabit(index, change) {
            habits[index].count = Math.max(0, habits[index].count + change);
            saveToStorage('habits', habits);
            renderHabits();
        }

        function updateHabitName(index, name) {
            habits[index].name = name;
            saveToStorage('habits', habits);
        }

        function updateHabitIcon(index, icon) {
            habits[index].icon = icon;
            saveToStorage('habits', habits);
        }

        function deleteHabit(index) {
            if (confirm('Delete this habit?')) {
                habits.splice(index, 1);
                saveToStorage('habits', habits);
                renderHabits();
            }
        }

        renderHabits();

        // Goals Management
        let goals = loadFromStorage('goals', [
            { id: 'goal1', name: 'Learn JavaScript', progress: 0 },
            { id: 'goal2', name: 'Build Portfolio', progress: 0 }
        ]);

        function renderGoals() {
            const container = document.getElementById('goalsContainer');
            container.innerHTML = goals.map((goal, index) => `
                <div class="goal-item">
                    <button class="goal-delete" data-delete-goal="${index}">Delete</button>
                    <div class="goal-name">
                        <span contenteditable="true" data-goal-name="${index}">${goal.name}</span>
                        <span class="goal-percent">${goal.progress}%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${goal.progress}%"></div>
                    </div>
                    <input type="range" min="0" max="100" value="${goal.progress}" data-goal-slider="${index}">
                </div>
            `).join('');
            
            // Add event listeners after rendering
            container.querySelectorAll('[data-delete-goal]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.deleteGoal);
                    deleteGoal(index);
                });
            });
            
            container.querySelectorAll('[data-goal-name]').forEach(el => {
                el.addEventListener('blur', (e) => {
                    const index = parseInt(e.target.dataset.goalName);
                    updateGoalName(index, e.target.textContent);
                });
            });
            
            container.querySelectorAll('[data-goal-slider]').forEach(slider => {
                slider.addEventListener('input', (e) => {
                    const index = parseInt(e.target.dataset.goalSlider);
                    updateGoalProgress(index, e.target.value);
                });
            });
        }

        function addGoal() {
            goals.push({ id: Date.now().toString(), name: 'New Goal', progress: 0 });
            saveToStorage('goals', goals);
            renderGoals();
        }

        function updateGoalName(index, name) {
            goals[index].name = name;
            saveToStorage('goals', goals);
        }

        function updateGoalProgress(index, progress) {
            goals[index].progress = parseInt(progress);
            saveToStorage('goals', goals);
            renderGoals();
        }

        function deleteGoal(index) {
            if (confirm('Delete this goal?')) {
                goals.splice(index, 1);
                saveToStorage('goals', goals);
                renderGoals();
            }
        }

        renderGoals();

        // Notes persistence
        const notesArea = document.getElementById('notes');
        notesArea.value = loadFromStorage('dashboardNotes', '');
        notesArea.addEventListener('input', () => {
            saveToStorage('dashboardNotes', notesArea.value);
        });
    </script>
</body>
</html>
